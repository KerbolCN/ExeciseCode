<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>泡面3分钟</title>
  <style>
    .clearfix::after {
      clear: both;
      content: "";
      display: block;
    }

    h3 {
      margin: 0;
      color: #4D4E6A;
    }

    .box {
      width: 198px;
      margin: 40px auto 0;
      background: #FED6F1;
      text-align: center;
    }

    .mode {
      width: 198px;
    }

    img {
      transform: rotateY(180deg);
    }

    .title,
    .timer {
      text-align: center;
      font-size: 38px;
      color: #6E6173;
    }

    button {
      width: 75px;
      margin: 0 auto 1px;
      border: 1px solid hsla(0, 0%, 0%, 0.6);
      background: #6E6173;
      color: #ffffff;
      cursor: pointer;
      outline: none;
    }

    .l {
      float: left;
    }

    .r {
      float: right;
    }
  </style>
</head>

<body>
  <div class="box clearfix">
    <img src="./img/QQ图片20191124090842.jpg" alt="">
    <div class="title">泡面3分钟</div>
    <h3>已泡好0份面</h3>
    <div class="timer">
      <span id="m">3</span>
      <span> : </span>
      <span id="s">00</span>
    </div>
    <button class="mode" title="手动：计时结束时会暂停&#10;自动：计时结束时会重置计时并继续">
      当前：手动泡面模式
    </button>
    <button class="l">开始</button>
    <button class="r">重置</button>
  </div>

  <script>
    var clickTimes = false;   // false 为正在计时
    var mode = true;          // ture 为手动模式
    var timer = 180;
    var conter = 0;
    var mTime = document.getElementById("m");
    var sTime = document.getElementById("s");
    var obj_title = document.getElementsByClassName("title")[0];
    var set_mode = document.getElementsByTagName("button")[0];
    var btn = document.getElementsByTagName("button")[1];
    var reset = document.getElementsByTagName("button")[2];
    var obj_h3 = document.getElementsByTagName("h3")[0];
    btn.onclick = function () {
      clickTimes = !clickTimes;
      if (clickTimes) {
        btn.innerText = "暂停";
        window.time = setInterval(() => {
          timer--;
          var sec = timer % 60;
          var show = "";
          if (sec >= 0 && sec < 10) {
            show = "0" + sec;
          } else {
            show = sec;
          }
          mTime.innerText = Math.floor(timer / 60);
          sTime.innerText = show;
          if (timer <= 0 && mode) {
            clickTimes = false;
            conter++;
            btn.innerText = "开始";
            obj_h3.innerText = "已泡好" + conter + "份面";
            clearInterval(time);
          }
          if (timer <= 0 && !mode) {
            timer = 180;
            conter++;
            obj_h3.innerText = "已泡好" + conter + "份面";
          }
        }, 1000);
      } else {
        btn.innerText = "开始";
        clearInterval(time);
      }
      if (timer <= 0) {
        timer = 180;
      }
    }

    set_mode.onclick = function () {
      mode = !mode;
      if (mode) {
        this.innerText = "当前：手动泡面模式";
        // this.title = "手动：计时结束时会暂停";
      } else {
        this.innerText = "当前：自动泡面模式";
        // this.title = "自动：计时结束时会自动重置并继续";
      }
    }

    reset.onclick = function () {
      clearInterval(time);
      timer = 180;
      clickTimes = false;
      btn.innerText = "开始";
      sTime.innerText = "00";
      mTime.innerText = "3";
    }
  </script>
</body>

</html>